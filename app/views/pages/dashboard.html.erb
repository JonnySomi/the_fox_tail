<body class="font-sans leading-normal tracking-normal">
  <main>
    <div class="flex flex-col md:flex-row">
      <nav aria-label="alternative-nav">
        <div class="shadow-xl h-20 fixed bottom-0 md:relative md:h-screen z-10 w-full md:w-48 content-center">
          <div class="md:mt-3 md:w-48 md:left-0 md:top-0 content-center md:content-start text-left justify-between">
            <ul class="list-reset flex flex-col md:flex-col pt-1 md:py-3 px-1 md:px-2 text-center md:text-left">
              <li class="mr-3 flex-1">
                <a href="<%= user_details_path(current_user)%>" class="block py-1 md:py-3 pl-1 align-middle no-underline hover:border-b-2 border-gray-800 ">
                  <i class="fas fa-tasks pr-0 md:pr-3"></i><span class="pb-1 md:pb-0 text-xs md:text-base block md:inline-block">Your Details</span>
                </a>
              </li>
              <li class="mr-3 flex-1">
                <a href="<%= dashboard_path(current_user)%>" class="block py-1 md:py-3 pl-1 align-middle no-underline hover:border-b-2 border-blue-600">
                  <i class="fas fa-chart-area pr-0 md:pr-3"></i><span class="pb-1 md:pb-0 text-xs md:text-base block md:inline-block">Analytics</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <section>
        <div id="main" class="main-content flex-1 pb-24 md:pb-5">
          <div class="title bg-gradient-to-r from-red-900 to-gray-900 p-4 shadow text-2xl">
            <h1 class="font-bold pl-2">Analytics</h1>
          </div>
          <div class="d-flex pt-3" style="justify-content: space-evenly;">
            <div class="flex flex-row items-center">
              <div class="pr-5">
                <%= pie_chart(current_user.services.group(:category).count,
                              colors: ["#b30000", "#7c1158", "#4421af", "#1a53ff", "#0d88e6", "#00b7c7"],
                              donut: true,
                              fontColor: "yellow",
                              legend: "bottom") %>
              </div>
              <%= column_chart(current_user.services.group(:name).sum(:price_per_month),
                            colors: ["#ca5310"],
                            donut: true,
                            xtitle: "service",
                            ytitle: "price/month",
                            height: "350px",
                            width: "400px",
                            fontColor: "yellow") %>
            </div>
          </div>
          <div class="flex flex-wrap">
            <% current_user.user_services.each do |user_service| %>
              <a href="<%=  user_service_path(user_service)  %>"><div class="w-full md:w-1/2 xl:w-1/3 p-6">
                <!--Metric Card-->
                <div class="bg-gradient-to-b from-green-200 to-green-100 border-b-4 border-green-600 rounded-lg shadow-xl p-5">
                  <div class="flex flex-row items-center">
                    <div class="flex-shrink pr-4">
                      <div class="rounded-full"><%= cl_image_tag user_service.service.photo.key, style: "object-fit: cover; border-radius: 50%; height: 100px; width: 100px;" %></div>
                    </div>
                    <div class="flex-1 text-right md:text-center">
                      <h2 class="font-bold uppercase text-gray-600"><%= user_service.service.name %></h2>
                      <p class="font-bold text-3xl"><%= user_service.price_per_month %>â‚¬/month</p>
                      <p class="font-bold text-3xl"><%= user_service.hour_spent_per_month %>h/month</p>
                    </div>
                  </div>
                </div></a>
                <!--/Metric Card-->
              </div>
            <% end %>
          </div>
        </div>
      </section>
    </div>
  </main>
</body>
